"use strict";(self["webpackChunkmoviewsd"]=self["webpackChunkmoviewsd"]||[]).push([[669],{8953:function(e,i,t){t.d(i,{A:function(){return g}});var s=t(6768),o=t(5130),l=t(4232);const a={class:"movie-card"},n=["src","alt"];function r(e,i,t,r,c,h){return(0,s.uX)(),(0,s.CE)("div",a,[(0,s.Lk)("img",{src:"https://image.tmdb.org/t/p/w500"+t.movie.poster_path,alt:t.movie.title,onClick:i[0]||(i[0]=(...e)=>h.toggleWishlist&&h.toggleWishlist(...e))},null,8,n),c.isWishlisted?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"wishlist-icon",onClick:i[1]||(i[1]=(0,o.D$)(((...e)=>h.toggleWishlist&&h.toggleWishlist(...e)),["stop"]))}," ★ ")):(0,s.Q3)("",!0),(0,s.Lk)("h3",null,(0,l.v_)(t.movie.title),1)])}t(4114),t(8992),t(7550);var c={props:{movie:Object},data(){return{isWishlisted:!1}},created(){this.checkWishlistStatus()},methods:{toggleWishlist(){const e=JSON.parse(localStorage.getItem("wishlist"))||[],i=e.findIndex((e=>e.id===this.movie.id));i>-1?(e.splice(i,1),this.isWishlisted=!1):(e.push(this.movie),this.isWishlisted=!0),localStorage.setItem("wishlist",JSON.stringify(e)),this.$emit("wishlist-updated")},checkWishlistStatus(){const e=JSON.parse(localStorage.getItem("wishlist"))||[];this.isWishlisted=e.some((e=>e.id===this.movie.id))}}},h=t(1241);const d=(0,h.A)(c,[["render",r],["__scopeId","data-v-de878ece"]]);var g=d},3669:function(e,i,t){t.r(i),t.d(i,{default:function(){return P}});var s=t(6768);function o(e,i,t,o,l,a){const n=(0,s.g2)("TrendMovies",!0);return(0,s.uX)(),(0,s.Wv)(n)}var l=t(4232);const a={class:"trend-movies"},n={class:"view-options"},r={key:0,class:"movie-list table-view"},c={class:"pagination"},h=["disabled"],d=["disabled"],g={key:0,class:"loading"};function v(e,i,t,o,v,u){const p=(0,s.g2)("movie-card");return(0,s.uX)(),(0,s.CE)("div",a,[(0,s.Lk)("div",n,[(0,s.Lk)("button",{onClick:i[0]||(i[0]=i=>e.changeView("table"))},"Table View"),(0,s.Lk)("button",{onClick:i[1]||(i[1]=i=>e.changeView("infinite"))},"Infinite Scroll")]),"table"===e.viewType?((0,s.uX)(),(0,s.CE)("div",r,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.paginatedMovies,(e=>((0,s.uX)(),(0,s.Wv)(p,{key:e.id,movie:e},null,8,["movie"])))),128)),(0,s.Lk)("div",c,[(0,s.Lk)("button",{onClick:i[2]||(i[2]=i=>e.changePage("previous")),disabled:1===e.page},(0,l.v_)(e.page-1),9,h),(0,s.Lk)("span",null,(0,l.v_)(e.page),1),(0,s.Lk)("button",{onClick:i[3]||(i[3]=i=>e.changePage("next")),disabled:e.page*e.itemsPerPage>=e.totalResults},(0,l.v_)(e.page+1),9,d)])])):(0,s.Q3)("",!0),"infinite"===e.viewType?((0,s.uX)(),(0,s.CE)("div",{key:1,class:"movie-list infinite-scroll",onScroll:i[4]||(i[4]=(...i)=>e.loadMore&&e.loadMore(...i)),ref:"scrollContainer"},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.movies,(e=>((0,s.uX)(),(0,s.Wv)(p,{key:e.id,movie:e},null,8,["movie"])))),128)),e.loading?((0,s.uX)(),(0,s.CE)("div",g,"Loading...")):(0,s.Q3)("",!0)],544)):(0,s.Q3)("",!0),"infinite"===e.viewType?((0,s.uX)(),(0,s.CE)("button",{key:2,class:"scroll-to-top",onClick:i[5]||(i[5]=(...i)=>e.scrollToTop&&e.scrollToTop(...i))}," ▲ ")):(0,s.Q3)("",!0)])}t(4114);var u=t(4373),p=t(8953),m={components:{MovieCard:p.A},data(){return{viewType:"table",movies:[],page:1,loading:!1,itemsPerPage:20,totalResults:0,isScrolled:!1}},mounted(){this.calculateItemsPerPage(),window.addEventListener("resize",this.calculateItemsPerPage),this.$refs.scrollContainer&&this.$refs.scrollContainer.addEventListener("scroll",this.checkScroll),this.fetchMovies()},beforeUnmount(){this.$refs.scrollContainer&&this.$refs.scrollContainer.removeEventListener("scroll",this.checkScroll)},computed:{paginatedMovies(){const e=(this.page-1)*this.itemsPerPage,i=e+this.itemsPerPage;return this.movies.slice(e,i)}},methods:{calculateItemsPerPage(){const e=320,i=220,t=100,s=50,o=window.innerHeight-t-s-50,l=window.innerWidth-50,a=Math.floor(o/e),n=Math.floor(l/i);this.itemsPerPage=a*n},async fetchMovies(){const e="1cc6831125c4a1baf8f809dc1f68ec14";try{this.loading=!0;const i=await u.A.get(`https://api.themoviedb.org/3/movie/popular?api_key=${e}&language=ko-KR&page=${this.page}`);1===this.page?this.movies=i.data.results:this.movies.push(...i.data.results),this.totalResults=i.data.total_results}catch(i){console.error("영화 데이터를 가져오는 데 오류가 발생했습니다.",i)}finally{this.loading=!1}},toggleWishlist(e){const i=JSON.parse(localStorage.getItem("wishlist"))||[],t=i.findIndex((i=>i.id===e.id));-1===t?i.push(e):i.splice(t,1),localStorage.setItem("wishlist",JSON.stringify(i))},changeView(e){this.viewType=e,this.page=1,this.movies=[],this.fetchMovies()},changePage(e){"previous"===e&&this.page>1?this.page--:"next"===e&&this.page*this.itemsPerPage<this.totalResults&&this.page++,this.fetchMovies()},loadMore(){this.loading||(this.page++,this.fetchMovies())},scrollToTop(){const e=this.$refs.scrollContainer;e.scrollTo({top:0,behavior:"smooth"})},checkScroll(){const e=this.$refs.scrollContainer;this.isScrolled=e.scrollTop>300}}},f=t(1241);const k=(0,f.A)(m,[["render",v],["__scopeId","data-v-582c3ad9"]]);var w=k,C={name:"TrendMoviesPage",components:{TrendMovies:w}};const b=(0,f.A)(C,[["render",o]]);var P=b}}]);
//# sourceMappingURL=669.0be70666.js.map