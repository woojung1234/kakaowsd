{"version":3,"file":"js/652.2c6e58ad.js","mappings":"6NAKA,GACEA,KAAAA,GACE,MAAMC,GAAQC,EAAAA,EAAAA,MACRC,GAASC,EAAAA,EAAAA,MAETC,EAAiBC,UAErB,MAAMC,EAAO,IAAIC,gBAAgBC,OAAOC,SAASC,QAAQC,IAAI,QAG7D,GAFAC,QAAQC,IAAI,sBAAuBP,IAE9BA,EAEH,OADAQ,MAAM,uDACCZ,EAAOa,KAAK,WAGrB,IAEE,MAAMC,QAAiBC,EAAAA,EAAMC,KAC3B,sCACA,IAAIX,gBAAgB,CAClBY,WAAY,qBACZC,UAAWC,GACXC,aAAcD,GACdf,SAEF,CACEiB,QAAS,CAAE,eAAgB,uCAIzBC,EAAcR,EAASS,KAAKC,aAClCd,QAAQC,IAAI,gBAAiBW,GAC7BG,aAAaC,QAAQ,mBAAoBJ,SAGnCxB,EAAM6B,SAAS,aAAcL,GAGnCtB,EAAOa,KAAK,CAAEe,KAAM,QACtB,CAAE,MAAOC,GACPnB,QAAQmB,MAAM,+BAAgCA,GAC9CjB,MAAM,uCACNZ,EAAOa,KAAK,UACd,GAKF,OAFAX,IAEO,CAAC,CACV,GCnDF,MAAM4B,EAAc,EAEpB,O","sources":["webpack://moviewsd/./src/components/SignIn/AuthCallback.vue","webpack://moviewsd/./src/components/SignIn/AuthCallback.vue?9c61"],"sourcesContent":["<script>\nimport axios from \"axios\";\nimport { useStore } from \"vuex\";\nimport { useRouter } from \"vue-router\";\n\nexport default {\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n\n    const handleCallback = async () => {\n      // 1. Authorization Code 가져오기\n      const code = new URLSearchParams(window.location.search).get(\"code\");\n      console.log(\"Authorization Code:\", code); // 디버깅용 로그\n\n      if (!code) {\n        alert(\"Authorization code is missing. Please log in again.\");\n        return router.push(\"/signin\");\n      }\n\n      try {\n        // 2. Kakao Token 요청\n        const response = await axios.post(\n          \"https://kauth.kakao.com/oauth/token\",\n          new URLSearchParams({\n            grant_type: \"authorization_code\",\n            client_id: process.env.VUE_APP_KAKAO_API_KEY,\n            redirect_uri: process.env.VUE_APP_REDIRECT_URI,\n            code,\n          }),\n          {\n            headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n          }\n        );\n\n        const accessToken = response.data.access_token;\n        console.log(\"Access Token:\", accessToken); // 디버깅용 로그\n        localStorage.setItem(\"kakaoAccessToken\", accessToken);\n\n        // 3. Vuex 상태 업데이트\n        await store.dispatch(\"kakaoLogin\", accessToken);\n\n        // 4. 홈 화면으로 리다이렉트\n        router.push({ name: \"home\" });\n      } catch (error) {\n        console.error(\"Kakao Token Exchange Failed:\", error); // 에러 디버깅\n        alert(\"Failed to log in. Please try again.\");\n        router.push(\"/signin\");\n      }\n    };\n\n    handleCallback();\n\n    return {};\n  },\n};\n</script>\n","import script from \"./AuthCallback.vue?vue&type=script&lang=js\"\nexport * from \"./AuthCallback.vue?vue&type=script&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["setup","store","useStore","router","useRouter","handleCallback","async","code","URLSearchParams","window","location","search","get","console","log","alert","push","response","axios","post","grant_type","client_id","process","redirect_uri","headers","accessToken","data","access_token","localStorage","setItem","dispatch","name","error","__exports__"],"sourceRoot":""}