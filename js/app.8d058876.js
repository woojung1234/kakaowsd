(function(){"use strict";var e={2731:function(e,t,o){var n=o(5130),a=o(6768),r=(o(4114),o(4232)),i=o(144),s=o(1387);const c={class:"header"},u={class:"logo"},l={class:"nav-links"},g={class:"auth"},d={key:0,class:"user-email"};var m={__name:"AppHeader",setup(e){const t=(0,s.rd)(),o=(0,i.KR)(""),n=()=>{const e=localStorage.getItem("userName");o.value=e||""},m=()=>{localStorage.removeItem("kakaoAccessToken"),localStorage.removeItem("userName"),o.value="",alert("로그아웃되었습니다."),t.push("/signin")},p=()=>t.push("/"),f=()=>t.push("/popular"),h=()=>t.push("/wishlist"),v=()=>t.push("/search"),k=()=>t.push("/signin");return(0,a.sV)((()=>{n()})),(e,t)=>{const n=(0,a.g2)("font-awesome-icon");return(0,a.uX)(),(0,a.CE)("header",c,[(0,a.Lk)("div",u,[(0,a.Lk)("button",{onClick:p,"aria-label":"로고"},[(0,a.bF)(n,{icon:["fas","tape"]})])]),(0,a.Lk)("nav",l,[(0,a.Lk)("button",{onClick:p,"aria-label":"홈화면"},[(0,a.bF)(n,{icon:["fas","house"]})]),(0,a.Lk)("button",{onClick:f,"aria-label":"인기 영화"},[(0,a.bF)(n,{icon:["fas","fire"]})]),(0,a.Lk)("button",{onClick:h,"aria-label":"좋아하는 영화"},[(0,a.bF)(n,{icon:["fas","heart"]})]),(0,a.Lk)("button",{class:"fab",onClick:v,"aria-label":"검색"},[(0,a.bF)(n,{icon:["fas","magnifying-glass"]})])]),(0,a.Lk)("div",g,[o.value?((0,a.uX)(),(0,a.CE)("span",d,(0,r.v_)(o.value)+"님",1)):(0,a.Q3)("",!0),o.value?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:m,"aria-label":"로그아웃"},[(0,a.bF)(n,{icon:["fas","right-from-bracket"]})])):((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:k,"aria-label":"로그인"},[(0,a.bF)(n,{icon:["fas","user"]})]))])])}}},p=o(1241);const f=(0,p.A)(m,[["__scopeId","data-v-5f38a574"]]);var h=f,v=o(782);const k={id:"app"};var y={__name:"App",setup(e){const t=(0,v.Pj)(),o=(0,a.EW)((()=>t.getters.isLoggedIn));return(e,t)=>{const n=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",k,[o.value?((0,a.uX)(),(0,a.Wv)(h,{key:0})):(0,a.Q3)("",!0),(0,a.bF)(n)])}}};const b=y;var E=b,A=o(4373),S=o(7411);const I=(0,S.dj)();var w=(0,v.y$)({state:{isLoggedIn:!1,apiKey:null,kakaoAccessToken:null,user:null,popularMovies:[],movieDetails:null,searchedMovies:[],genreMovies:[],genres:[]},getters:{isLoggedIn:e=>e.isLoggedIn,user:e=>e.user,apiKey:e=>e.apiKey,popularMovies:e=>e.popularMovies,movieDetails:e=>e.movieDetails,searchedMovies:e=>e.searchedMovies,genreMovies:e=>e.genreMovies,genres:e=>e.genres},mutations:{SET_LOGIN_STATE(e,t){e.isLoggedIn=t.isLoggedIn,e.apiKey=t.apiKey,e.kakaoAccessToken=t.kakaoAccessToken,e.user=t.userl},LOGOUT(e){e.isLoggedIn=!1,e.apiKey=null,e.kakaoAccessToken=null,e.user=null},SET_POPULAR_MOVIES(e,t){e.popularMovies=t},SET_MOVIE_DETAILS(e,t){e.movieDetails=t},SET_SEARCHED_MOVIES(e,t){e.searchedMovies=t},SET_GENRE_MOVIES(e,t){e.genreMovies=t},SET_GENRES(e,t){e.genres=t},SET_API_KEY(e,t){e.apiKey=t}},actions:{async kakaoLogin({commit:e},t){try{const o=await A.A.get("https://kapi.kakao.com/v2/user/me",{headers:{Authorization:`Bearer ${t}`}}),n=o.data,a=n.properties?.nickname||"사용자";console.log("Kakao User Info:",n),e("SET_LOGIN_STATE",{isLoggedIn:!0,kakaoAccessToken:t,user:n}),localStorage.setItem("kakaoAccessToken",t),localStorage.setItem("user",JSON.stringify(n)),localStorage.setItem("userName",a),I.success(`Welcome, ${a}!`)}catch(o){throw console.error("Kakao login failed:",o),localStorage.removeItem("kakaoAccessToken"),I.error("Failed to log in with Kakao. Please try again."),new Error("Kakao login failed")}},logout({commit:e}){e("LOGOUT"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("kakaoAccessToken"),localStorage.removeItem("user"),I.info("You have been logged out.")},loadAuthState({commit:e}){const t="true"===localStorage.getItem("isLoggedIn"),o=localStorage.getItem("kakaoAccessToken"),n=JSON.parse(localStorage.getItem("user")),a=localStorage.getItem("apiKey");t&&o&&e("SET_LOGIN_STATE",{isLoggedIn:t,kakaoAccessToken:o,user:n}),a?e("SET_API_KEY",a):(console.warn("API Key is missing. Redirecting to login page..."),I.error("API Key가 없습니다. 로그인을 진행해주세요."))},async fetchPopularMovies({commit:e,state:t}){try{if(!t.apiKey)throw new Error("API Key is missing");const o=await A.A.get("https://api.themoviedb.org/3/movie/popular",{params:{api_key:t.apiKey,language:"ko-KR",page:1}});e("SET_POPULAR_MOVIES",o.data.results)}catch(o){console.error("Error fetching popular movies:",o),I.error("Failed to fetch movies. Please check your API Key.")}},async fetchMovieDetails({commit:e,state:t},o){try{if(!t.apiKey)throw new Error("API Key is missing");const n=await A.A.get(`https://api.themoviedb.org/3/movie/${o}`,{params:{api_key:t.apiKey,language:"ko-KR"}});e("SET_MOVIE_DETAILS",n.data)}catch(n){console.error("Error fetching movie details:",n),I.error("Failed to fetch movie details. Please check your API Key.")}},async fetchSearchedMovies({commit:e,state:t},o){try{if(!t.apiKey)throw new Error("API Key is missing");const n=await A.A.get("https://api.themoviedb.org/3/search/movie",{params:{api_key:t.apiKey,language:"ko-KR",query:o,page:1}});e("SET_SEARCHED_MOVIES",n.data.results)}catch(n){console.error("Error fetching searched movies:",n),I.error("Failed to fetch searched movies. Please check your API Key.")}},async fetchGenreMovies({commit:e,state:t},o){try{if(!t.apiKey)throw new Error("API Key is missing");const n=await A.A.get("https://api.themoviedb.org/3/discover/movie",{params:{api_key:t.apiKey,language:"ko-KR",with_genres:o,page:1}});e("SET_GENRE_MOVIES",n.data.results)}catch(n){console.error("Error fetching genre movies:",n),I.error("Failed to fetch genre movies. Please check your API Key.")}},async fetchGenres({commit:e,state:t}){try{if(!t.apiKey)throw new Error("API Key is missing");const o=await A.A.get("https://api.themoviedb.org/3/genre/movie/list",{params:{api_key:t.apiKey,language:"ko-KR"}});e("SET_GENRES",o.data.genres)}catch(o){console.error("Error fetching genres:",o),I.error("Failed to fetch genres. Please check your API Key.")}}},modules:{}});const T=[{path:"/signin",name:"signin",component:()=>o.e(868).then(o.bind(o,4616))},{path:"/auth/callback",name:"callback",component:()=>o.e(652).then(o.bind(o,4652))},{path:"/",name:"home",component:()=>o.e(948).then(o.bind(o,6948)),meta:{requiresAuth:!0}},{path:"/popular",name:"popular",component:()=>o.e(669).then(o.bind(o,3669)),meta:{requiresAuth:!0}},{path:"/movie/:id",name:"movie-details",component:()=>o.e(119).then(o.bind(o,9119)),props:!0,meta:{requiresAuth:!0}},{path:"/search",name:"search",component:()=>o.e(315).then(o.bind(o,9315)),meta:{requiresAuth:!0}},{path:"/wishlist",name:"wishlist",component:()=>o.e(104).then(o.bind(o,3104)),meta:{requiresAuth:!0}}],_=(0,s.aE)({history:(0,s.LA)("/kakaowsd/"),routes:T});_.beforeEach(((e,t,o)=>{const n=w.getters.isLoggedIn||localStorage.getItem("kakaoAccessToken");e.meta.requiresAuth&&!n?o({name:"signin"}):"signin"===e.name&&n?o({name:"home"}):o()}));var K=_,L=(o(7917),o(8950)),O=o(292),P=o(2353);const C=(0,n.Ef)(E),M={position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0};L.Yv.add(P.X7I),L.Yv.add(P.$UM),localStorage.getItem("kakaoAccessToken")&&w.dispatch("kakaoLogin",localStorage.getItem("kakaoAccessToken")),C.use(S.Ay,M),C.component("font-awesome-icon",O.gc),C.use(w).use(K).mount("#app")}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.loaded=!0,r.exports}o.m=e,function(){var e=[];o.O=function(t,n,a,r){if(!n){var i=1/0;for(l=0;l<e.length;l++){n=e[l][0],a=e[l][1],r=e[l][2];for(var s=!0,c=0;c<n.length;c++)(!1&r||i>=r)&&Object.keys(o.O).every((function(e){return o.O[e](n[c])}))?n.splice(c--,1):(s=!1,r<i&&(i=r));if(s){e.splice(l--,1);var u=a();void 0!==u&&(t=u)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[n,a,r]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,n){return o.f[n](e,t),t}),[]))}}(),function(){o.u=function(e){return"js/"+e+"."+{104:"78636199",119:"e50ceeb9",315:"b0fa6efc",652:"fb3a18b9",669:"b2943c38",868:"6cad7fae",948:"687d2e6e"}[e]+".js"}}(),function(){o.miniCssF=function(e){return"css/"+e+"."+{104:"89a9e027",119:"d7c2365f",315:"d9f362b9",669:"9299b318",868:"521be2ef",948:"18c9e95d"}[e]+".css"}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="moviewsd:";o.l=function(n,a,r,i){if(e[n])e[n].push(a);else{var s,c;if(void 0!==r)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var g=u[l];if(g.getAttribute("src")==n||g.getAttribute("data-webpack")==t+r){s=g;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",t+r),s.src=n),e[n]=[a];var d=function(t,o){s.onerror=s.onload=null,clearTimeout(m);var a=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(o)})),t)return t(o)},m=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){o.p="/kakaowsd/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,n,a,r){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",o.nc&&(i.nonce=o.nc);var s=function(o){if(i.onerror=i.onload=null,"load"===o.type)a();else{var n=o&&o.type,s=o&&o.target&&o.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+n+": "+s+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=n,c.request=s,i.parentNode&&i.parentNode.removeChild(i),r(c)}};return i.onerror=i.onload=s,i.href=t,n?n.parentNode.insertBefore(i,n.nextSibling):document.head.appendChild(i),i},t=function(e,t){for(var o=document.getElementsByTagName("link"),n=0;n<o.length;n++){var a=o[n],r=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(r===e||r===t))return a}var i=document.getElementsByTagName("style");for(n=0;n<i.length;n++){a=i[n],r=a.getAttribute("data-href");if(r===e||r===t)return a}},n=function(n){return new Promise((function(a,r){var i=o.miniCssF(n),s=o.p+i;if(t(i,s))return a();e(n,s,null,a,r)}))},a={524:0};o.f.miniCss=function(e,t){var o={104:1,119:1,315:1,669:1,868:1,948:1};a[e]?t.push(a[e]):0!==a[e]&&o[e]&&t.push(a[e]=n(e).then((function(){a[e]=0}),(function(t){throw delete a[e],t})))}}}(),function(){var e={524:0};o.f.j=function(t,n){var a=o.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var r=new Promise((function(o,n){a=e[t]=[o,n]}));n.push(a[2]=r);var i=o.p+o.u(t),s=new Error,c=function(n){if(o.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",s.name="ChunkLoadError",s.type=r,s.request=i,a[1](s)}};o.l(i,c,"chunk-"+t,t)}},o.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,r,i=n[0],s=n[1],c=n[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(a in s)o.o(s,a)&&(o.m[a]=s[a]);if(c)var l=c(o)}for(t&&t(n);u<i.length;u++)r=i[u],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(l)},n=self["webpackChunkmoviewsd"]=self["webpackChunkmoviewsd"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],(function(){return o(2731)}));n=o.O(n)})();
//# sourceMappingURL=app.8d058876.js.map