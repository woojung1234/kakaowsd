(function(){"use strict";var e={6749:function(e,o,t){var a=t(5130),n=t(6768),r=(t(4114),t(4232)),i=t(144),s=t(1387);const c={class:"header"},l={class:"logo"},u={class:"nav-links"},g={class:"auth"},d={key:0,class:"user-email"};var m={__name:"AppHeader",setup(e){const o=(0,s.rd)(),t=(0,i.KR)(""),a=()=>{const e=localStorage.getItem("userName");t.value=e||""},m=()=>{localStorage.removeItem("kakaoAccessToken"),localStorage.removeItem("userName"),t.value="",alert("로그아웃되었습니다."),o.push("/signin")},p=()=>o.push("/"),h=()=>o.push("/popular"),f=()=>o.push("/wishlist"),v=()=>o.push("/search"),k=()=>o.push("/signin");return(0,n.sV)((()=>{a()})),(e,o)=>{const a=(0,n.g2)("font-awesome-icon");return(0,n.uX)(),(0,n.CE)("header",c,[(0,n.Lk)("div",l,[(0,n.Lk)("button",{onClick:p,"aria-label":"로고"},[(0,n.bF)(a,{icon:["fas","tape"]})])]),(0,n.Lk)("nav",u,[(0,n.Lk)("button",{onClick:p,"aria-label":"홈화면"},[(0,n.bF)(a,{icon:["fas","house"]})]),(0,n.Lk)("button",{onClick:h,"aria-label":"인기 영화"},[(0,n.bF)(a,{icon:["fas","fire"]})]),(0,n.Lk)("button",{onClick:f,"aria-label":"좋아하는 영화"},[(0,n.bF)(a,{icon:["fas","heart"]})]),(0,n.Lk)("button",{class:"fab",onClick:v,"aria-label":"검색"},[(0,n.bF)(a,{icon:["fas","magnifying-glass"]})])]),(0,n.Lk)("div",g,[t.value?((0,n.uX)(),(0,n.CE)("span",d,(0,r.v_)(t.value)+"님",1)):(0,n.Q3)("",!0),t.value?((0,n.uX)(),(0,n.CE)("button",{key:1,onClick:m,"aria-label":"로그아웃"},[(0,n.bF)(a,{icon:["fas","right-from-bracket"]})])):((0,n.uX)(),(0,n.CE)("button",{key:2,onClick:k,"aria-label":"로그인"},[(0,n.bF)(a,{icon:["fas","user"]})]))])])}}},p=t(1241);const h=(0,p.A)(m,[["__scopeId","data-v-5f38a574"]]);var f=h,v=t(782);const k={id:"app"},y={key:0,class:"loading"},b={key:1};var E={__name:"App",setup(e){const o=(0,v.Pj)(),t=(0,i.KR)(!0),a=(0,n.EW)((()=>o.getters.isLoggedIn));return(0,n.sV)((()=>{a.value||o.dispatch("loadAuthState"),t.value=!1})),(e,o)=>{const r=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",k,[t.value?((0,n.uX)(),(0,n.CE)("div",y,o[0]||(o[0]=[(0,n.Lk)("p",null,"Loading...",-1)]))):((0,n.uX)(),(0,n.CE)("div",b,[a.value?((0,n.uX)(),(0,n.Wv)(f,{key:0})):(0,n.Q3)("",!0),(0,n.bF)(r)]))])}}};const A=E;var S=A,I=t(4373),w=t(7411);const T=(0,w.dj)();var _=(0,v.y$)({state:{isLoggedIn:!1,apiKey:null,kakaoAccessToken:null,user:null,popularMovies:[],movieDetails:null,searchedMovies:[],genreMovies:[],genres:[]},getters:{isLoggedIn:e=>e.isLoggedIn,user:e=>e.user,apiKey:e=>e.apiKey,popularMovies:e=>e.popularMovies,movieDetails:e=>e.movieDetails,searchedMovies:e=>e.searchedMovies,genreMovies:e=>e.genreMovies,genres:e=>e.genres},mutations:{SET_LOGIN_STATE(e,o){e.isLoggedIn=o.isLoggedIn,e.apiKey=o.apiKey,e.kakaoAccessToken=o.kakaoAccessToken,e.user=o.userl},LOGOUT(e){e.isLoggedIn=!1,e.apiKey=null,e.kakaoAccessToken=null,e.user=null},SET_POPULAR_MOVIES(e,o){e.popularMovies=o},SET_MOVIE_DETAILS(e,o){e.movieDetails=o},SET_SEARCHED_MOVIES(e,o){e.searchedMovies=o},SET_GENRE_MOVIES(e,o){e.genreMovies=o},SET_GENRES(e,o){e.genres=o},SET_API_KEY(e,o){e.apiKey=o}},actions:{async kakaoLogin({commit:e},o){try{const t=await I.A.get("https://kapi.kakao.com/v2/user/me",{headers:{Authorization:`Bearer ${o}`}}),a=t.data,n=a.properties?.nickname||"사용자";console.log("Kakao User Info:",a),e("SET_LOGIN_STATE",{isLoggedIn:!0,kakaoAccessToken:o,user:a}),localStorage.setItem("kakaoAccessToken",o),localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("userName",n),T.success(`Welcome, ${n}!`)}catch(t){throw console.error("Kakao login failed:",t),localStorage.removeItem("kakaoAccessToken"),T.error("Failed to log in with Kakao. Please try again."),new Error("Kakao login failed")}},logout({commit:e}){e("LOGOUT"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("kakaoAccessToken"),localStorage.removeItem("user"),T.info("You have been logged out.")},loadAuthState({commit:e}){const o="true"===localStorage.getItem("isLoggedIn"),t=localStorage.getItem("kakaoAccessToken"),a=JSON.parse(localStorage.getItem("user")),n=localStorage.getItem("apiKey");o&&t&&e("SET_LOGIN_STATE",{isLoggedIn:o,kakaoAccessToken:t,user:a}),n?e("SET_API_KEY",n):(console.warn("API Key is missing. Redirecting to login page..."),T.error("API Key가 없습니다. 로그인을 진행해주세요."))},async fetchPopularMovies({commit:e,state:o}){try{if(!o.apiKey)throw new Error("API Key is missing");const t=await I.A.get("https://api.themoviedb.org/3/movie/popular",{params:{api_key:o.apiKey,language:"ko-KR",page:1}});e("SET_POPULAR_MOVIES",t.data.results)}catch(t){console.error("Error fetching popular movies:",t),T.error("Failed to fetch movies. Please check your API Key.")}},async fetchMovieDetails({commit:e,state:o},t){try{if(!o.apiKey)throw new Error("API Key is missing");const a=await I.A.get(`https://api.themoviedb.org/3/movie/${t}`,{params:{api_key:o.apiKey,language:"ko-KR"}});e("SET_MOVIE_DETAILS",a.data)}catch(a){console.error("Error fetching movie details:",a),T.error("Failed to fetch movie details. Please check your API Key.")}},async fetchSearchedMovies({commit:e,state:o},t){try{if(!o.apiKey)throw new Error("API Key is missing");const a=await I.A.get("https://api.themoviedb.org/3/search/movie",{params:{api_key:o.apiKey,language:"ko-KR",query:t,page:1}});e("SET_SEARCHED_MOVIES",a.data.results)}catch(a){console.error("Error fetching searched movies:",a),T.error("Failed to fetch searched movies. Please check your API Key.")}},async fetchGenreMovies({commit:e,state:o},t){try{if(!o.apiKey)throw new Error("API Key is missing");const a=await I.A.get("https://api.themoviedb.org/3/discover/movie",{params:{api_key:o.apiKey,language:"ko-KR",with_genres:t,page:1}});e("SET_GENRE_MOVIES",a.data.results)}catch(a){console.error("Error fetching genre movies:",a),T.error("Failed to fetch genre movies. Please check your API Key.")}},async fetchGenres({commit:e,state:o}){try{if(!o.apiKey)throw new Error("API Key is missing");const t=await I.A.get("https://api.themoviedb.org/3/genre/movie/list",{params:{api_key:o.apiKey,language:"ko-KR"}});e("SET_GENRES",t.data.genres)}catch(t){console.error("Error fetching genres:",t),T.error("Failed to fetch genres. Please check your API Key.")}}},modules:{}});const K=[{path:"/signin",name:"signin",component:()=>t.e(868).then(t.bind(t,4616))},{path:"/auth/callback",name:"callback",component:()=>t.e(652).then(t.bind(t,4652))},{path:"/",name:"home",component:()=>t.e(948).then(t.bind(t,6948)),meta:{requiresAuth:!0}},{path:"/popular",name:"popular",component:()=>t.e(669).then(t.bind(t,3669)),meta:{requiresAuth:!0}},{path:"/movie/:id",name:"movie-details",component:()=>t.e(119).then(t.bind(t,9119)),props:!0,meta:{requiresAuth:!0}},{path:"/search",name:"search",component:()=>t.e(315).then(t.bind(t,9315)),meta:{requiresAuth:!0}},{path:"/wishlist",name:"wishlist",component:()=>t.e(104).then(t.bind(t,3104)),meta:{requiresAuth:!0}}],L=(0,s.aE)({history:(0,s.LA)("/kakaowsd/"),routes:K});L.beforeEach(((e,o,t)=>{const a=_.getters.isLoggedIn||localStorage.getItem("kakaoAccessToken");e.meta.requiresAuth&&!a?t({name:"signin"}):"signin"===e.name&&a?t({name:"home"}):t()}));var O=L,P=(t(7917),t(8950)),C=t(292),M=t(2353);const N={position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0};P.Yv.add(M.X7I),P.Yv.add(M.$UM);const F=(0,a.Ef)(S),R=()=>{const e="true"===localStorage.getItem("isLoggedIn"),o=localStorage.getItem("kakaoAccessToken"),t=localStorage.getItem("user");if(console.log("LocalStorage 데이터:",{isLoggedIn:e,kakaoAccessToken:o,user:t}),e&&o&&t)try{_.dispatch("loadAuthState")}catch(a){console.error("Vuex 상태 초기화 중 오류 발생:",a)}else console.warn("LocalStorage에 로그인 정보가 없습니다.")};R(),F.use(w.Ay,N),F.component("font-awesome-icon",C.gc),F.use(_).use(O).mount("#app")}},o={};function t(a){var n=o[a];if(void 0!==n)return n.exports;var r=o[a]={id:a,loaded:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}t.m=e,function(){var e=[];t.O=function(o,a,n,r){if(!a){var i=1/0;for(u=0;u<e.length;u++){a=e[u][0],n=e[u][1],r=e[u][2];for(var s=!0,c=0;c<a.length;c++)(!1&r||i>=r)&&Object.keys(t.O).every((function(e){return t.O[e](a[c])}))?a.splice(c--,1):(s=!1,r<i&&(i=r));if(s){e.splice(u--,1);var l=n();void 0!==l&&(o=l)}}return o}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[a,n,r]}}(),function(){t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,{a:o}),o}}(),function(){t.d=function(e,o){for(var a in o)t.o(o,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:o[a]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(o,a){return t.f[a](e,o),o}),[]))}}(),function(){t.u=function(e){return"js/"+e+"."+{104:"78636199",119:"e50ceeb9",315:"b0fa6efc",652:"fb3a18b9",669:"b2943c38",868:"6cad7fae",948:"687d2e6e"}[e]+".js"}}(),function(){t.miniCssF=function(e){return"css/"+e+"."+{104:"89a9e027",119:"d7c2365f",315:"d9f362b9",669:"9299b318",868:"521be2ef",948:"18c9e95d"}[e]+".css"}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){var e={},o="moviewsd:";t.l=function(a,n,r,i){if(e[a])e[a].push(n);else{var s,c;if(void 0!==r)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var g=l[u];if(g.getAttribute("src")==a||g.getAttribute("data-webpack")==o+r){s=g;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,t.nc&&s.setAttribute("nonce",t.nc),s.setAttribute("data-webpack",o+r),s.src=a),e[a]=[n];var d=function(o,t){s.onerror=s.onload=null,clearTimeout(m);var n=e[a];if(delete e[a],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach((function(e){return e(t)})),o)return o(t)},m=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){t.p="/kakaowsd/"}(),function(){if("undefined"!==typeof document){var e=function(e,o,a,n,r){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",t.nc&&(i.nonce=t.nc);var s=function(t){if(i.onerror=i.onload=null,"load"===t.type)n();else{var a=t&&t.type,s=t&&t.target&&t.target.href||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+": "+s+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=a,c.request=s,i.parentNode&&i.parentNode.removeChild(i),r(c)}};return i.onerror=i.onload=s,i.href=o,a?a.parentNode.insertBefore(i,a.nextSibling):document.head.appendChild(i),i},o=function(e,o){for(var t=document.getElementsByTagName("link"),a=0;a<t.length;a++){var n=t[a],r=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(r===e||r===o))return n}var i=document.getElementsByTagName("style");for(a=0;a<i.length;a++){n=i[a],r=n.getAttribute("data-href");if(r===e||r===o)return n}},a=function(a){return new Promise((function(n,r){var i=t.miniCssF(a),s=t.p+i;if(o(i,s))return n();e(a,s,null,n,r)}))},n={524:0};t.f.miniCss=function(e,o){var t={104:1,119:1,315:1,669:1,868:1,948:1};n[e]?o.push(n[e]):0!==n[e]&&t[e]&&o.push(n[e]=a(e).then((function(){n[e]=0}),(function(o){throw delete n[e],o})))}}}(),function(){var e={524:0};t.f.j=function(o,a){var n=t.o(e,o)?e[o]:void 0;if(0!==n)if(n)a.push(n[2]);else{var r=new Promise((function(t,a){n=e[o]=[t,a]}));a.push(n[2]=r);var i=t.p+t.u(o),s=new Error,c=function(a){if(t.o(e,o)&&(n=e[o],0!==n&&(e[o]=void 0),n)){var r=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;s.message="Loading chunk "+o+" failed.\n("+r+": "+i+")",s.name="ChunkLoadError",s.type=r,s.request=i,n[1](s)}};t.l(i,c,"chunk-"+o,o)}},t.O.j=function(o){return 0===e[o]};var o=function(o,a){var n,r,i=a[0],s=a[1],c=a[2],l=0;if(i.some((function(o){return 0!==e[o]}))){for(n in s)t.o(s,n)&&(t.m[n]=s[n]);if(c)var u=c(t)}for(o&&o(a);l<i.length;l++)r=i[l],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(u)},a=self["webpackChunkmoviewsd"]=self["webpackChunkmoviewsd"]||[];a.forEach(o.bind(null,0)),a.push=o.bind(null,a.push.bind(a))}();var a=t.O(void 0,[504],(function(){return t(6749)}));a=t.O(a)})();
//# sourceMappingURL=app.f17eb49c.js.map